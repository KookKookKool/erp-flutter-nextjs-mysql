# ЁЯУЪ ERP Backend - Complete Documentation

> **р╣Ар╕нр╕Бр╕кр╕▓р╕гр╕Йр╕Ър╕▒р╕Ър╕гр╕зр╕б** р╕кр╕│р╕лр╕гр╕▒р╕Ър╕гр╕░р╕Ър╕Ъ ERP Backend р╕Чр╕╡р╣Ир╕Др╕гр╕нр╕Ър╕Др╕ер╕╕р╕бр╕Чр╕╕р╕Бр╕Фр╣Йр╕▓р╕Щ
> 
> **р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╕ер╣Ир╕▓р╕кр╕╕р╕Ф**: 10 р╕Бр╕гр╕Бр╕Ор╕▓р╕Др╕б 2025

---

## ЁЯУЦ р╕кр╕▓р╕гр╕Ър╕▒р╕Н

- [ЁЯЪА р╕ар╕▓р╕Юр╕гр╕зр╕бр╕гр╕░р╕Ър╕Ъ](#-р╕ар╕▓р╕Юр╕гр╕зр╕бр╕гр╕░р╕Ър╕Ъ)
- [тЪб Quick Start](#-quick-start)
- [ЁЯПЧя╕П р╕кр╕Цр╕▓р╕Ыр╕▒р╕Хр╕вр╕Бр╕гр╕гр╕б](#-р╕кр╕Цр╕▓р╕Ыр╕▒р╕Хр╕вр╕Бр╕гр╕гр╕б)
- [ЁЯСе р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й](#-р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й)
- [ЁЯФР р╕гр╕░р╕Ър╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣М](#-р╕гр╕░р╕Ър╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣М)
- [ЁЯзк р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ](#-р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ)
- [ЁЯЧДя╕П р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е](#-р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е)
- [ЁЯФз р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ](#-р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ)
- [тЭУ р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓](#-р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓)

---

## ЁЯЪА р╕ар╕▓р╕Юр╕гр╕зр╕бр╕гр╕░р╕Ър╕Ъ

### р╕Др╕╕р╕Ур╕кр╕бр╕Ър╕▒р╕Хр╕┤р╕лр╕ер╕▒р╕Б
- **Multi-Tenant Architecture** - р╣Бр╕вр╕Б database schema р╕кр╕│р╕лр╕гр╕▒р╕Ър╣Бр╕Хр╣Ир╕ер╕░р╕нр╕Зр╕Др╣Мр╕Бр╕г
- **Admin Panel** - р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕нр╕Зр╕Др╣Мр╕Бр╕гр╣Бр╕ер╕░р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Бр╕Ър╕Ъ centralized
- **Super Admin System** - р╕кр╕гр╣Йр╕▓р╕З Super Admin р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕нр╕Зр╕Др╣Мр╕Бр╕г
- **Permission Management** - р╕гр╕░р╕Ър╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╣Бр╕Ър╕Ър╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф (100+ permissions)
- **Subscription Management** - р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Бр╕Юр╕ер╕Щр╣Бр╕ер╕░р╕зр╕▒р╕Щр╕лр╕бр╕Фр╕нр╕▓р╕вр╕╕
- **RESTful API** - р╣Ар╕Кр╕╖р╣Ир╕нр╕бр╕Хр╣Ир╕нр╕Бр╕▒р╕Ъ Flutter frontend
- **Audit Logging** - р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╕Бр╕гр╕░р╕Чр╕│р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

### р╣Ар╕Чр╕Др╣Вр╕Щр╣Вр╕ер╕вр╕╡
- **Backend**: Next.js 14 + TypeScript
- **Database**: MySQL 8.0 + Prisma ORM
- **Authentication**: JWT
- **Styling**: Tailwind CSS
- **Containerization**: Docker + Docker Compose

---

## тЪб Quick Start

### ЁЯОп р╕зр╕┤р╕Шр╕╡р╕Чр╕╡р╣Ир╣Ар╕гр╣Зр╕зр╕Чр╕╡р╣Ир╕кр╕╕р╕Ф
```bash
# 1. р╕гр╕▒р╕Щр╣Др╕Яр╕ер╣М batch manager
erp-manager.bat

# 2. р╣Ар╕ер╕╖р╕нр╕Б "1" р╕кр╕│р╕лр╕гр╕▒р╕Ъ Full Setup
# 3. р╕гр╕нр╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╣Ар╕кр╕гр╣Зр╕И (2-3 р╕Щр╕▓р╕Чр╕╡)
# 4. р╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ Admin Panel
```

### ЁЯФЧ URLs р╕кр╕│р╕Др╕▒р╕Н
- **Admin Panel**: http://localhost:3000/admin/login
- **Test Registration**: http://localhost:3000/test-registration.html
- **phpMyAdmin**: http://localhost:8080

### ЁЯФС р╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕Вр╣Йр╕▓р╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
```
Admin Panel:
ЁЯУз Email: admin@sunerp.com
ЁЯФР Password: admin123

Database:
ЁЯЦея╕П Host: localhost:3306
ЁЯСд Username: erp_app
ЁЯФР Password: erp_app_pass123
```

---

## ЁЯПЧя╕П р╕кр╕Цр╕▓р╕Ыр╕▒р╕Хр╕вр╕Бр╕гр╕гр╕б

### Database Structure

#### Main Database (`erp_main`)
```sql
ЁЯУК organizations        -- р╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕Зр╕Др╣Мр╕Бр╕гр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
ЁЯСд admin_users          -- Super Admin р╕гр╕░р╕Ър╕Ъ
ЁЯУЛ admin_audit_logs     -- р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╕Чр╕│р╕Зр╕▓р╕Щ
тЪЩя╕П admin_settings       -- р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓р╕гр╕░р╕Ър╕Ъ
```

#### Organization Schemas (`org_xxxxx`)
```sql
ЁЯСе users                -- р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Гр╕Щр╕нр╕Зр╕Др╣Мр╕Бр╕г
ЁЯФР user_permissions     -- р╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╣Бр╕Ър╕Ър╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф
ЁЯУЛ role_templates       -- template р╕кр╕┤р╕Чр╕Шр╕┤р╣М

-- р╣Вр╕бр╕Фр╕╣р╕е ERP
ЁЯПв hrm_*               -- Human Resource Management
ЁЯТ░ accounting_*        -- р╕Бр╕▓р╕гр╕Ър╕▒р╕Нр╕Кр╕╡
ЁЯЫТ sales_*             -- р╕Бр╕▓р╕гр╕Вр╕▓р╕в
ЁЯУж inventory_*         -- р╕Др╕ер╕▒р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓
ЁЯЫНя╕П purchasing_*        -- р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Лр╕╖р╣Йр╕н
ЁЯУЮ crm_*               -- Customer Relationship
ЁЯУЛ project_*           -- р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Вр╕Др╕гр╕Зр╕Бр╕▓р╕г
```

### Multi-Tenant Flow
```
1. Organization Registration
   тЖУ
2. Admin Approval
   тЖУ
3. Auto Schema Creation (org_xxxxx)
   тЖУ
4. Super Admin Creation
   тЖУ
5. Ready to Use
```

---

## ЁЯСе р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Й

### User Roles

#### ЁЯФ┤ SUPER_ADMIN
- **р╕Чр╕╡р╣Ир╕бр╕▓**: р╕кр╕гр╣Йр╕▓р╕Зр╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤р╣Ар╕бр╕╖р╣Ир╕нр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕нр╕Зр╕Др╣Мр╕Бр╕г
- **р╕нр╕╡р╣Ар╕бр╕е**: `admin_[ORG_CODE]` (р╣Ар╕Кр╣Ир╕Щ admin_ORG2507101234)
- **р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ**: `123456` (р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Др╕Фр╣Й)
- **р╕кр╕┤р╕Чр╕Шр╕┤р╣М**: р╕Др╕гр╕Ър╕Чр╕╕р╕Бр╕кр╕┤р╕Чр╕Шр╕┤р╣М (100 permissions)
- **р╕Вр╣Йр╕нр╕Ир╕│р╕Бр╕▒р╕Ф**: р╣Др╕бр╣Ир╕кр╕▓р╕бр╕▓р╕гр╕Цр╕ер╕Ър╕лр╕гр╕╖р╕нр╕Ыр╕┤р╕Фр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Й

#### ЁЯФ╡ ADMIN
- **р╕Чр╕╡р╣Ир╕бр╕▓**: р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Фр╕в Super Admin
- **р╕кр╕┤р╕Чр╕Шр╕┤р╣М**: р╕Хр╕▓р╕бр╕Чр╕╡р╣И Super Admin р╕Бр╕│р╕лр╕Щр╕Ф
- **р╕Вр╣Йр╕нр╕Ир╕│р╕Бр╕▒р╕Ф**: р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕ер╕Ър╣Бр╕ер╕░р╕Ыр╕┤р╕Фр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щр╣Др╕Фр╣Й

#### ЁЯЯб MANAGER / USER / VIEWER
- **р╕Чр╕╡р╣Ир╕бр╕▓**: р╕кр╕гр╣Йр╕▓р╕Зр╣Вр╕Фр╕в Admin р╕Вр╕╢р╣Йр╕Щр╣Др╕Ы
- **р╕кр╕┤р╕Чр╕Шр╕┤р╣М**: р╕Хр╕▓р╕б role template + custom permissions
- **р╕Вр╣Йр╕нр╕Ир╕│р╕Бр╕▒р╕Ф**: р╕кр╕▓р╕бр╕▓р╕гр╕Цр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Др╕Фр╣Йр╕Хр╕▓р╕бр╕кр╕┤р╕Чр╕Шр╕┤р╣М

### User Management Flow

#### р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕нр╕Зр╕Др╣Мр╕Бр╕гр╣Гр╕лр╕бр╣И
```
1. р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕Зр╕Др╣Мр╕Бр╕гр╣Гр╕Щ Test Registration
2. Admin Panel тЖТ Organizations тЖТ Approve
3. р╕гр╕░р╕Ър╕Ър╕кр╕гр╣Йр╕▓р╕З schema org_xxxxx р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
4. р╕гр╕░р╕Ър╕Ър╕кр╕гр╣Йр╕▓р╕З Super Admin р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
5. Super Admin р╣Гр╕Кр╣Й Flutter App р╣Др╕Фр╣Йр╕Чр╕▒р╕Щр╕Чр╕╡
```

#### р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╣Гр╕Щ Admin Panel
```
1. р╣Ар╕Вр╣Йр╕▓ Organization Detail
2. р╕Фр╕╣р╕гр╕▓р╕вр╕Бр╕▓р╕г Users
3. Add/Edit/Delete/Toggle Status
4. Manage Permissions (р╕вр╕Бр╣Ар╕зр╣Йр╕Щ Super Admin)
5. Change Password (Super Admin р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Др╕Фр╣Йр╣Ар╕Йр╕Юр╕▓р╕░р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ)
```

---

## ЁЯФР р╕гр╕░р╕Ър╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣М

### Permission Structure
```
Module
тФЬтФАтФА Submodule
    тФЬтФАтФА view     (р╕Фр╕╣)
    тФЬтФАтФА create   (р╕кр╕гр╣Йр╕▓р╕З)
    тФЬтФАтФА edit     (р╣Бр╕Бр╣Йр╣Др╕В)
    тФФтФАтФА delete   (р╕ер╕Ъ)
```

### Modules & Submodules

#### ЁЯПв HRM (Human Resource Management)
- **employees** - р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щ
- **payroll** - р╣Ар╕Зр╕┤р╕Щр╣Ар╕Фр╕╖р╕нр╕Щр╣Бр╕ер╕░р╕кр╕зр╕▒р╕кр╕Фр╕┤р╕Бр╕▓р╕г
- **attendance** - р╣Ар╕зр╕ер╕▓р╣Ар╕Вр╣Йр╕▓-р╕нр╕нр╕Бр╕Зр╕▓р╕Щ
- **leave** - р╕Бр╕▓р╕гр╕ер╕▓р╕Зр╕▓р╕Щ
- **performance** - р╕Ыр╕гр╕░р╣Ар╕бр╕┤р╕Щр╕Ьр╕ер╕Зр╕▓р╕Щ

#### ЁЯТ░ Accounting (р╕Бр╕▓р╕гр╕Ър╕▒р╕Нр╕Кр╕╡)
- **accounts** - р╕Ър╕▒р╕Нр╕Кр╕╡
- **journal** - р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Ър╕▒р╕Нр╕Кр╕╡
- **reports** - р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╕Чр╕▓р╕Зр╕Бр╕▓р╕гр╣Ар╕Зр╕┤р╕Щ
- **budget** - р╕Зр╕Ър╕Ыр╕гр╕░р╕бр╕▓р╕У
- **assets** - р╕кр╕┤р╕Щр╕Чр╕гр╕▒р╕Юр╕вр╣М

#### ЁЯЫТ Sales (р╕Бр╕▓р╕гр╕Вр╕▓р╕в)
- **customers** - р╕ер╕╣р╕Бр╕Др╣Йр╕▓
- **orders** - р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н
- **invoices** - р╣Гр╕Ър╣Бр╕Ир╣Йр╕Зр╕лр╕Щр╕╡р╣Й
- **quotes** - р╣Гр╕Ър╣Ар╕кр╕Щр╕нр╕гр╕▓р╕Др╕▓
- **reports** - р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╕Бр╕▓р╕гр╕Вр╕▓р╕в

#### ЁЯУж Inventory (р╕Др╕ер╕▒р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓)
- **products** - р╕кр╕┤р╕Щр╕Др╣Йр╕▓
- **stock** - р╕кр╕Хр╣Зр╕нр╕Б
- **warehouse** - р╕Др╕ер╕▒р╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓
- **categories** - р╕лр╕бр╕зр╕Фр╕лр╕бр╕╣р╣И
- **adjustments** - р╕Ыр╕гр╕▒р╕Ър╕Ыр╕гр╕╕р╕Зр╕кр╕Хр╣Зр╕нр╕Б

#### ЁЯЫНя╕П Purchasing (р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Лр╕╖р╣Йр╕н)
- **suppliers** - р╕Ьр╕╣р╣Йр╕Ир╕│р╕лр╕Щр╣Ир╕▓р╕в
- **purchase_orders** - р╣Гр╕Ър╕кр╕▒р╣Ир╕Зр╕Лр╕╖р╣Йр╕н
- **receipts** - р╣Гр╕Ър╕гр╕▒р╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓
- **payments** - р╕Бр╕▓р╕гр╕Кр╕│р╕гр╕░р╣Ар╕Зр╕┤р╕Щ
- **reports** - р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Лр╕╖р╣Йр╕н

#### ЁЯУЮ CRM (Customer Relationship)
- **leads** - р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Ар╕Ыр╣Йр╕▓р╕лр╕бр╕▓р╕в
- **contacts** - р╕гр╕▓р╕вр╕Кр╕╖р╣Ир╕нр╕Хр╕┤р╕Фр╕Хр╣Ир╕н
- **opportunities** - р╣Вр╕нр╕Бр╕▓р╕кр╕Чр╕▓р╕Зр╕Бр╕▓р╕гр╕Вр╕▓р╕в
- **campaigns** - р╣Бр╕Др╕бр╣Ар╕Ыр╕Н
- **reports** - р╕гр╕▓р╕вр╕Зр╕▓р╕Щ CRM

#### ЁЯУЛ Project (р╕Бр╕▓р╕гр╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Вр╕Др╕гр╕Зр╕Бр╕▓р╕г)
- **projects** - р╣Вр╕Др╕гр╕Зр╕Бр╕▓р╕г
- **tasks** - р╕Зр╕▓р╕Щ
- **time_tracking** - р╕Хр╕┤р╕Фр╕Хр╕▓р╕бр╣Ар╕зр╕ер╕▓
- **resources** - р╕Чр╕гр╕▒р╕Юр╕вр╕▓р╕Бр╕г
- **reports** - р╕гр╕▓р╕вр╕Зр╕▓р╕Щр╣Вр╕Др╕гр╕Зр╕Бр╕▓р╕г

#### тЪЩя╕П Settings (р╕Бр╕▓р╕гр╕Хр╕▒р╣Йр╕Зр╕Др╣Ир╕▓)
- **users** - р╕Ьр╕╣р╣Йр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ
- **roles** - р╕Ър╕Чр╕Ър╕▓р╕Ч
- **permissions** - р╕кр╕┤р╕Чр╕Шр╕┤р╣М
- **system** - р╕гр╕░р╕Ър╕Ъ
- **backup** - р╕кр╕│р╕гр╕нр╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕е

### Total Permissions
**25 submodules ├Ч 4 permissions = 100 permissions**

---

## ЁЯзк р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### Integration Test

#### р╕зр╕┤р╕Шр╕╡р╕гр╕▒р╕Щ
```bash
npm run test:integration
```

#### р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Чр╕Фр╕кр╕нр╕Ъ
- тЬЕ р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З database schema
- тЬЕ р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕Зр╕Хр╕▓р╕гр╕▓р╕З users р╣Бр╕ер╕░ user_permissions
- тЬЕ р╕Бр╕▓р╕гр╕кр╕гр╣Йр╕▓р╕З Super Admin р╕нр╕▒р╕Хр╣Вр╕Щр╕бр╕▒р╕Хр╕┤
- тЬЕ р╕гр╕╣р╕Ыр╣Бр╕Ър╕Ър╕нр╕╡р╣Ар╕бр╕е admin_[ORG_CODE]
- тЬЕ р╕Бр╕▓р╕гр╣Гр╕лр╣Йр╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Др╕гр╕Ър╕Чр╕╕р╕Бр╕кр╕┤р╕Чр╕Шр╕┤р╣М
- тЬЕ р╕Бр╕▓р╕гр╕Чр╕│р╕Др╕зр╕▓р╕бр╕кр╕░р╕нр╕▓р╕Фр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕Фр╕кр╕нр╕Ъ

#### р╕Ьр╕ер╕ер╕▒р╕Юр╕Шр╣Мр╕Чр╕╡р╣Ир╕Др╕▓р╕Фр╕лр╕зр╕▒р╕З
```
ЁЯОЙ Super Admin creation test PASSED!

ЁЯУЛ Summary:
   тЬЕ Email format: admin_[ORG_CODE]
   тЬЕ Name: Super Admin
   тЬЕ Role: SUPER_ADMIN
   тЬЕ Password: 123456 (changeable)
   тЬЕ Permissions: Full access to all modules
```

### Manual Testing

#### 1. Organization Registration
```
1. р╣Ар╕Ыр╕┤р╕Ф http://localhost:3000/test-registration.html
2. р╕Бр╕гр╕нр╕Бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕Зр╕Др╣Мр╕Бр╕г
3. р╕кр╣Ир╕Зр╕Яр╕нр╕гр╣Мр╕б
4. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Щ Admin Panel
```

#### 2. Organization Approval
```
1. р╣Ар╕Вр╣Йр╕▓ Admin Panel
2. р╣Др╕Ыр╕Чр╕╡р╣И Organizations
3. р╕Др╕ер╕┤р╕Б organization р╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕г
4. р╕Др╕ер╕┤р╕Б Approve
5. р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Super Admin р╣Гр╕Щ Users section
```

#### 3. Super Admin Login
```
1. р╣Гр╕Кр╣Й Flutter App
2. р╕ер╣Зр╕нр╕Бр╕нр╕┤р╕Щр╕Фр╣Йр╕зр╕в admin_[ORG_CODE]
3. р╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ 123456
4. р╕Чр╕Фр╕кр╕нр╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╕Хр╣Ир╕▓р╕Зр╣Ж
```

---

## ЁЯЧДя╕П р╣Вр╕Др╕гр╕Зр╕кр╕гр╣Йр╕▓р╕Зр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е

### Schema Naming Convention
```
Main Database: erp_main
Organization Schemas: org_[orgcode_lowercase]

р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З:
- org_company123
- org_test2507101234
- org_abcltd
```

### Table Naming Convention
```
System Tables: table_name
Module Tables: module_table_name

р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕З:
- users, user_permissions
- hrm_employees, hrm_departments
- accounting_transactions
- sales_customers, sales_orders
```

### Key Tables

#### users
```sql
id               VARCHAR(191) PRIMARY KEY
email            VARCHAR(191) UNIQUE
name             VARCHAR(191)
password         VARCHAR(191)
role             ENUM('SUPER_ADMIN', 'ADMIN', 'MANAGER', 'USER', 'VIEWER')
is_active        BOOLEAN DEFAULT TRUE
created_at       DATETIME(3)
updated_at       DATETIME(3)
```

#### user_permissions
```sql
id               INT AUTO_INCREMENT PRIMARY KEY
user_id          VARCHAR(191)
module           VARCHAR(100)
submodule        VARCHAR(100)
permission       VARCHAR(50)
granted          BOOLEAN DEFAULT FALSE
created_at       DATETIME(3)
updated_at       DATETIME(3)
```

---

## ЁЯФз р╕Бр╕▓р╕гр╣Гр╕Кр╣Йр╕Зр╕▓р╕Щ

### ERP Manager Tool (`erp-manager.bat`)

#### р╕Др╕│р╕кр╕▒р╣Ир╕Зр╕лр╕ер╕▒р╕Б
1. **ЁЯПЧя╕П Full Setup** - р╕Хр╕┤р╕Фр╕Хр╕▒р╣Йр╕Зр╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Б
2. **ЁЯР│ Start Docker** - р╣Ар╕гр╕┤р╣Ир╕б Docker р╣Ар╕Чр╣Ир╕▓р╕Щр╕▒р╣Йр╕Щ
3. **ЁЯЦея╕П Start Dev Server** - р╣Ар╕гр╕┤р╣Ир╕б development server
4. **ЁЯзк Run Tests** - р╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ
5. **ЁЯУК Admin Dashboard** - р╣Ар╕Ыр╕┤р╕Ф Admin Panel
6. **ЁЯЧДя╕П phpMyAdmin** - р╣Ар╕Ыр╕┤р╕Фр╕Рр╕▓р╕Щр╕Вр╣Йр╕нр╕бр╕╣р╕е
7. **ЁЯФД Reset Database** - р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
8. **ЁЯЫС Stop Services** - р╕лр╕вр╕╕р╕Фр╕Ър╕гр╕┤р╕Бр╕▓р╕гр╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф

### NPM Scripts
```bash
npm run dev          # р╣Ар╕гр╕┤р╣Ир╕б development server
npm run build        # build р╕кр╕│р╕лр╕гр╕▒р╕Ъ production
npm run start        # р╣Ар╕гр╕┤р╣Ир╕б production server
npm run db:push      # р╕нр╕▒р╕Ыр╣Ар╕Фр╕Х database schema
npm run db:generate  # р╕кр╕гр╣Йр╕▓р╕З Prisma client
npm run db:seed      # р╣Ар╕Юр╕┤р╣Ир╕бр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Ар╕гр╕┤р╣Ир╕бр╕Хр╣Йр╕Щ
npm run test:integration  # р╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ
```

### Docker Commands
```bash
docker-compose up -d     # р╣Ар╕гр╕┤р╣Ир╕б services
docker-compose down      # р╕лр╕вр╕╕р╕Ф services
docker-compose logs -f   # р╕Фр╕╣ logs
```

---

## тЭУ р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓

### р╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ър╕Ър╣Ир╕нр╕в

#### 1. ЁЯЪл Connection Error
```
тЭМ Error: connect ECONNREFUSED 127.0.0.1:3306
```
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Docker
docker-compose ps

# р╣Ар╕гр╕┤р╣Ир╕бр╣Гр╕лр╕бр╣И
docker-compose up -d
```

#### 2. ЁЯФР Permission Denied
```
тЭМ Error: Access denied for user 'erp_app'
```
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Др╕Яр╕ер╣М .env
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ database credentials
```

#### 3. ЁЯУК Admin Login Failed
```
тЭМ Invalid credentials
```
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
```bash
# р╕гр╕▒р╕Щ seed р╣Гр╕лр╕бр╣И
npm run db:seed

# р╣Гр╕Кр╣Йр╕Вр╣Йр╕нр╕бр╕╣р╕е default:
# Email: admin@sunerp.com
# Password: admin123
```

#### 4. ЁЯЧДя╕П Schema Not Created
```
тЭМ Schema org_xxxxx not found
```
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ user permissions р╣Гр╕Щ MySQL
# р╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤р╕нр╕Зр╕Др╣Мр╕Бр╕гр╣Гр╕лр╕бр╣Ир╕Ьр╣Ир╕▓р╕Щ Admin Panel
```

#### 5. ЁЯзк Test Failed
```
тЭМ Integration test failed
```
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
```bash
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ MySQL connection
# р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ ENUM values р╣Гр╕Щр╕Хр╕▓р╕гр╕▓р╕З users
npm run test:integration
```

### Debug Mode

#### р╣Ар╕Ыр╕┤р╕Ф Verbose Logging
```javascript
// р╣Гр╕Щ .env
NODE_ENV=development
DEBUG=true
```

#### р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ Database
```sql
-- р╕Фр╕╣ schemas р╕Чр╕▒р╣Йр╕Зр╕лр╕бр╕Ф
SHOW DATABASES LIKE 'org_%';

-- р╕Фр╕╣ users р╣Гр╕Щ schema
USE org_xxxxx;
SELECT * FROM users;

-- р╕Фр╕╣ permissions
SELECT * FROM user_permissions WHERE user_id = 'xxx';
```

### Performance Tips

#### 1. Database
- р╣Гр╕Кр╣Й indexes р╕Чр╕╡р╣Ир╣Ар╕лр╕бр╕▓р╕░р╕кр╕б
- р╕ер╣Йр╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╕Чр╕Фр╕кр╕нр╕Ър╣Ар╕Ыр╣Зр╕Щр╕Ыр╕гр╕░р╕Ир╕│
- Monitor connection pool

#### 2. Application
- р╣Гр╕Кр╣Й Prisma connection pooling
- Cache static data
- Optimize API responses

---

## ЁЯУЮ р╕Хр╕┤р╕Фр╕Хр╣Ир╕нр╣Бр╕ер╕░р╕кр╕Щр╕▒р╕Ър╕кр╕Щр╕╕р╕Щ

### р╕Бр╕▓р╕гр╕гр╕▓р╕вр╕Зр╕▓р╕Щр╕Ыр╕▒р╕Нр╕лр╕▓
1. р╕гр╕▒р╕Щ integration test р╕Бр╣Ир╕нр╕Щ
2. р╕гр╕зр╕Ър╕гр╕зр╕б error logs
3. р╕гр╕░р╕Ър╕╕р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣Ир╕Чр╕│р╣Гр╕лр╣Йр╣Ар╕Бр╕┤р╕Фр╕Ыр╕▒р╕Нр╕лр╕▓
4. р╕гр╕зр╕б environment information

### р╕Бр╕▓р╕гр╕Юр╕▒р╕Тр╕Щр╕▓р╕Хр╣Ир╕н
1. р╕кр╕гр╣Йр╕▓р╕З feature branch
2. р╣Ар╕Вр╕╡р╕вр╕Щ tests р╕кр╕│р╕лр╕гр╕▒р╕Ъ feature р╣Гр╕лр╕бр╣И
3. р╕нр╕▒р╕Ыр╣Ар╕Фр╕Хр╣Ар╕нр╕Бр╕кр╕▓р╕г
4. р╕Чр╕Фр╕кр╕нр╕Ъ integration

---

## ЁЯУЭ р╣Ар╕зр╕нр╕гр╣Мр╕Кр╕▒р╣Ир╕Щр╣Бр╕ер╕░р╕Бр╕▓р╕гр╕нр╕▒р╕Ыр╣Ар╕Фр╕Х

### Version History
- **v1.0** - р╕гр╕░р╕Ър╕Ър╕Юр╕╖р╣Йр╕Щр╕Рр╕▓р╕Щ Multi-tenant
- **v1.1** - р╣Ар╕Юр╕┤р╣Ир╕б Super Admin auto-creation
- **v1.2** - р╕гр╕░р╕Ър╕Ър╕кр╕┤р╕Чр╕Шр╕┤р╣Мр╣Бр╕Ър╕Ър╕ер╕░р╣Ар╕нр╕╡р╕вр╕Ф
- **v1.3** - Admin Panel UI/UX improvements
- **v1.4** - Integration testing framework
- **v1.5** - р╕гр╕зр╕бр╣Ар╕нр╕Бр╕кр╕▓р╕гр╣Бр╕ер╕░р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╣Др╕Яр╕ер╣М

### Roadmap
- [ ] API Rate Limiting
- [ ] Advanced Audit Logging
- [ ] Multi-language Support
- [ ] Mobile Admin App
- [ ] Advanced Analytics

---

**ЁЯОЙ р╕Вр╕Вр╕нр╕Ър╕Др╕╕р╕Ур╕Чр╕╡р╣Ир╣Гр╕Кр╣Й ERP Backend System!**

> р╕лр╕▓р╕Бр╕бр╕╡р╕Др╕│р╕Цр╕▓р╕бр╕лр╕гр╕╖р╕нр╕Хр╣Йр╕нр╕Зр╕Бр╕▓р╕гр╕Др╕зр╕▓р╕бр╕Кр╣Ир╕зр╕вр╣Ар╕лр╕ер╕╖р╕нр╣Ар╕Юр╕┤р╣Ир╕бр╣Ар╕Хр╕┤р╕б р╕Бр╕гр╕╕р╕Ур╕▓р╕нр╣Ир╕▓р╕Щр╕кр╣Ир╕зр╕Щ [р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓](#-р╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓) р╕лр╕гр╕╖р╕нр╕гр╕▒р╕Щр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ър╕Фр╣Йр╕зр╕в `npm run test:integration`
